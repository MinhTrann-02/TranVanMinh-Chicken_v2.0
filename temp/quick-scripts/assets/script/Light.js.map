{"version":3,"sources":["Light.js"],"names":["cc","Class","extends","Component","properties","redSprite","Sprite","yellowSprite","greenSprite","chicken","car","manager","Node","isLightGreen","_time","_timeFlash","_red","Color","RED","_yellow","YELLOW","_green","GREEN","_colorDefault","GRAY","start","turnOff","update","dt","getComponent","isClick","turnOn","flashLight","sprite","color","node","Math","floor"],"mappings":"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","file":"Light.js","sourceRoot":"../../../../assets/script","sourcesContent":["cc.Class({\n    extends: cc.Component,\n    properties: {\n        redSprite: cc.Sprite,\n        yellowSprite: cc.Sprite,\n        greenSprite: cc.Sprite,\n        chicken: cc.Sprite,\n        car: cc.Sprite,\n        manager: cc.Node,\n        isLightGreen: false,\n        _time: 0,\n        _timeFlash: 0,\n        _red: cc.Color.RED,\n        _yellow: cc.Color.YELLOW,\n        _green: cc.Color.GREEN,\n        _colorDefault: cc.Color.GRAY\n    },\n\n    start() {\n        this.turnOff(this.redSprite);\n        this.turnOff(this.yellowSprite);\n        this.turnOff(this.greenSprite);\n    },\n\n    update(dt) {\n        if (this.manager.getComponent(\"GameManager\").isClick == true) {\n            if (this._time >= 0) {\n                this.turnOn(this.redSprite, this._red);\n                this.turnOff(this.yellowSprite);\n                this.turnOff(this.greenSprite);\n            }\n            if (this._time > 1) {\n                this.flashLight(this.redSprite, this._red, dt);\n            }\n            if (this._time > 2) {\n                this.turnOn(this.yellowSprite, this._yellow);\n                this.turnOff(this.redSprite);\n                this.turnOff(this.greenSprite);\n            }\n            if (this._time > 2.9) {\n                this.flashLight(this.yellowSprite, this._yellow, dt);\n            }\n            if (this._time > 3.5) {\n                this.turnOn(this.greenSprite, this._green);\n                this.turnOff(this.yellowSprite);\n                this.turnOff(this.redSprite);\n                this.isLightGreen = true;\n            }\n            this._time += dt;\n        }\n\n    },\n\n    turnOn(sprite, color) {\n        sprite.node.color = color;\n    },\n\n    turnOff(sprite) {\n        sprite.node.color = this._colorDefault;\n    },\n\n    flashLight(sprite, color, dt) {\n        if (Math.floor(this._timeFlash) % 2 == 0) {\n            sprite.node.color = this._colorDefault;\n        } else {\n            sprite.node.color = color;\n        }\n        this._timeFlash += dt * 5;\n        if (this._timeFlash >= 8) {\n            return true;\n        } else return false;        \n    },\n});"]}